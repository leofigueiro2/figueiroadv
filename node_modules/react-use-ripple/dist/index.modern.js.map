{"version":3,"file":"index.modern.js","sources":["../src/index.ts"],"sourcesContent":["import { RefObject, useEffect } from 'react';\n\nconst ANIMATION_LENGTH = 700;\nconst RIPPLE_SIZE = 100;\nconst RIPPLE_COLOR = 'rgba(0, 0, 0, 0.3)';\n\nif (typeof document !== 'undefined') {\n  const style = document.createElement('style');\n\n  const keyframes = `\n    @keyframes use-ripple-animation {\n      from {\n        opacity: 1;\n        transform: scale(0);\n      }\n      to {\n        opacity: 0;\n        transform: scale(10);\n      }\n    }\n    `;\n\n  style.innerHTML = keyframes;\n\n  document.querySelector('head')?.appendChild(style);\n}\n\nexport interface RippleOptions {\n  disabled?: boolean;\n  rippleColor?: string;\n  animationLength?: number;\n  rippleSize?: number;\n  excludedRefs?: RefObject<HTMLElement>[];\n}\n\ninterface RippleEvent {\n  clientX?: number;\n  clientY?: number;\n  target: EventTarget | null;\n}\n\nconst defaultEvent: Required<RippleEvent> = {\n  clientX: 0,\n  clientY: 0,\n  target: null,\n};\n\nconst createRipple = (element: HTMLElement, options?: RippleOptions) => (\n  e?: RippleEvent,\n) => {\n  const isExcluded = (options?.excludedRefs || []).some(\n    ref =>\n      (!!ref.current && ref.current.contains(e?.target as Node)) ||\n      ref.current?.isSameNode(e?.target as Node),\n  );\n\n  if (isExcluded) {\n    return;\n  }\n\n  const clientX = e?.clientX || defaultEvent.clientX;\n  const clientY = e?.clientY || defaultEvent.clientY;\n\n  const { height, width, top, left } = element.getBoundingClientRect();\n  const x = clientX - left;\n  const y = clientY - top;\n\n  const rippleSize = Math.min(\n    height,\n    width,\n    options?.rippleSize || RIPPLE_SIZE,\n  );\n\n  const positionTop = clientX\n    ? y - rippleSize / 2\n    : rippleSize / 2 - height / 2;\n  const positionLeft = clientY\n    ? x - rippleSize / 2\n    : width / 2 - rippleSize / 2;\n\n  const span = document.createElement('span');\n\n  span.style.cssText = `\n    top: ${positionTop}px;\n    left: ${positionLeft}px;\n    position: absolute;\n    border-radius: 50%;\n    background-color: ${options?.rippleColor || RIPPLE_COLOR};\n    pointer-events: none;\n    width: ${rippleSize}px;\n    height: ${rippleSize}px;\n    animation: use-ripple-animation ${options?.animationLength ||\n      ANIMATION_LENGTH}ms ease-in;\n  `;\n\n  element.appendChild(span);\n\n  span.addEventListener('animationend', () => {\n    element.removeChild(span);\n  });\n};\n\nexport const useRipple = (\n  ref: RefObject<HTMLElement>,\n  options?: RippleOptions,\n) => {\n  useEffect(() => {\n    if (options?.disabled || !ref?.current) {\n      return;\n    }\n\n    const element = ref.current;\n    const elementPosition = getComputedStyle(element).getPropertyValue(\n      'position',\n    );\n\n    element.style.position =\n      elementPosition === 'static' || !elementPosition\n        ? 'relative'\n        : elementPosition;\n    element.style.overflow = 'hidden';\n\n    const ripple = createRipple(element, options);\n\n    const keyboardRipple = (e: KeyboardEvent) => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        ripple();\n      }\n    };\n\n    element.addEventListener('mousedown', ripple);\n    element.addEventListener('keydown', keyboardRipple);\n\n    return () => {\n      element.removeEventListener('mousedown', ripple);\n      element.removeEventListener('keydown', keyboardRipple);\n    };\n  });\n};\n"],"names":["ANIMATION_LENGTH","RIPPLE_SIZE","RIPPLE_COLOR","document","style","createElement","keyframes","innerHTML","querySelector","appendChild","defaultEvent","clientX","clientY","target","createRipple","element","options","e","isExcluded","excludedRefs","some","ref","current","contains","isSameNode","getBoundingClientRect","height","width","top","left","x","y","rippleSize","Math","min","positionTop","positionLeft","span","cssText","rippleColor","animationLength","addEventListener","removeChild","useRipple","useEffect","disabled","elementPosition","getComputedStyle","getPropertyValue","position","overflow","ripple","keyboardRipple","key","removeEventListener"],"mappings":"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"}